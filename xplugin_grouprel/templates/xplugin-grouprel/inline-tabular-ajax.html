{% extends "xadmin/edit_inline/base.html" %}
{% load i18n xadmin_tags crispy_forms_tags %}

{% block box_title %}{{ opts.verbose_name_plural|title }}{% endblock box_title %}

{% block box_content %}
    <script type="application/javascript">
        var grouprel_datatable = {
            ajax: {
                url: "{{ ajax_table_url }}"
            },
            columns_defs: [],
            button: {
                add: {
                    title: "{{ table_object_add.title }}",
                    url: "{{ table_object_add.url }}",
                    refresh_url: "{{ table_object_add.refresh_url }}"
                },
                delete: {
                    url: "{{ table_object_delete.url }}",
                    title: "{{ table_object_delete.title }}",
                }
            }
        };
        {% for column in table.columns %}
        grouprel_datatable.columns_defs.push({
            targets: {{ column.datatable.index }},
            searchable: {{ column.datatable.searchable|yesno:"true,false" }},
            orderable: {{ column.datatable.orderable|yesno:"true,false" }},
            visible: {{ column.datatable.visible|yesno:"true,false" }},
            className: {% if column.datatable.className %}"{{ column.datatable.className }}"{% else %}null{% endif %}
        });
        {% endfor %}
    </script>

    <table id="ajax-table" class="table table-striped table-bordered" style="width:100%">
        <thead>
            <tr>
                {% for column in table.columns %}
                    <th>{{ column.verbose_name }}</th>
                {% endfor %}
            </tr>
        </thead>
    </table>

{% endblock box_content %}